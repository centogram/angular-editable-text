!function(){"use strict";angular.module("gg.editableText",[])}(),function(){"use strict";angular.module("gg.editableText",["puElasticInput"]).directive("editableText",["$rootScope","EditableTextHelper",function(a,b){return{scope:{editableText:"=",editMode:"=",placeholder:"@",onChange:"&",onReject:"&"},transclude:!0,template:'<span ng-class="{\'is-placeholder\': placeholder && !editingValue}" ng-style="{\'max-width\': \'inherit\'}" ><input ng-blur="onInputBlur()" ng-click="onInputClick()" ng-keydown="onKeyPress($event)" ng-model="editingValue" placeholder="{{placeholder}}"type="text" pu-elastic-input pu-elastic-input-minwidth="auto" pu-elastic-input-maxwidth="inherit" /><span ng-show="isWorking && EditableTextHelper.workingText.length" class="'+b.workingClassName+'">'+b.workingText+"</span></span>",link:function(b,c,d){var e,f=c.find("input");b.isEditing=!!b.editMode,b.editingValue=b.editableText,c.addClass("gg-editable-text"),b.onInputClick=function(){b.isEditing=!0,d.hasOwnProperty("selectAll")&&f.select()},a.$evalAsync(function(){$(f[0]).width($(c).width())}),b.onInputBlur=function(){b.isEditing=!1,a.$evalAsync(function(){$(f[0]).width($(c).width())})},b.onKeyPress=function(a){var c=f[0];13===a.which?$(c).blur():27===a.which&&(b.editingValue=b.editableText,$(c).blur())},b.$watch("isEditing",function(a,g){var h;f[0];void 0!==d.editMode&&(b.editMode=a),c[a?"addClass":"removeClass"]("editing"),a||(d.onChange&&a!==g&&b.editingValue!=e?(h=b.onChange({value:b.editingValue}),h&&h.then?(b.isWorking=!0,h.then(function(a){b.editableText=b.editingValue=a,b.isWorking=!1},function(){b.onReject&&b.onReject(),b.editingValue=b.editableText,b.isWorking=!1})):h?b.editableText=b.editingValue=h:b.editingValue=b.editableText):b.editableText=b.editingValue)}),b.$watch("editMode",function(a){b.isEditing=!!a}),b.$watch("editableText",function(a){e=a,b.editingValue=a})}}}])}(),function(){angular.module("gg.editableText").provider("EditableTextHelper",function(){var a="",b="";this.setWorkingText=function(b){return a=b,this},this.setWorkingClassName=function(a){return b=a,this},this.$get=function(){return{workingText:a,workingClassName:b}}})}();