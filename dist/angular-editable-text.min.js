!function(){"use strict";angular.module("gg.editableText",["puElasticInput"])}(),function(){"use strict";function a(a,b,c,d){function e(a,d,e){function f(){d.addClass("gg-editable-text"),i=d.find("input")[0],a.editingValue=a.editableText,a.$watch("isEditing",h),a.$watch("editableText",function(b){j=b,a.editingValue=b,g()})}function g(){a.isEditing&&e.hasOwnProperty("ggSelectAll")&&i.setSelectionRange(0,a.editingValue.length)}function h(c,f){d[c?"addClass":"removeClass"]("editing"),c?(i.focus(),g()):e.hasOwnProperty("ggOnChange")&&c!==f&&a.editingValue!==j?(a.isWorking=!0,b.when(a.onChange({value:a.editingValue})).then(function(b){"undefined"!=typeof b&&(a.editingText=a.editingValue=b)},function(){a.editingValue=a.editableText})["finally"](function(){a.isWorking=!1,g()})):(a.editableText=a.editingValue,g())}var i,j;f(),a.onInputFocus=function(){a.isEditing=!0,g()},a.onInputBlur=function(){a.isEditing=!1},a.onKeyPress=function(b){13===b.which?($(i).blur(),e.hasOwnProperty("ggKeepFocus")&&c(a.onInputFocus,20)):27===b.which&&(a.editingValue=a.editableText,$(i).blur())}}return{restrict:"EA",scope:{editableText:"=ggEditableText",isEditing:"=ggIsEditing",placeholder:"@",onChange:"&ggOnChange"},transclude:!0,template:'<span ng-class="{\'is-placeholder\': placeholder && !editingValue}" ng-style="{\'max-width\': \'inherit\'}" ><input ng-focus="onInputFocus()" ng-blur="onInputBlur()" ng-keydown="onKeyPress($event)" ng-model="editingValue" placeholder="{{placeholder}}" type="text" pu-elastic-input pu-elastic-input-minwidth="auto" pu-elastic-input-maxwidth="inherit" /><span ng-hide="isEditing" ng-transclude></span><span ng-show="isWorking && EditableTextHelper.workingText.length" class="'+d.workingClassName+'">'+d.workingText+"</span></span>",link:e}}angular.module("gg.editableText").directive("ggEditableText",a),a.$inject=["$rootScope","$q","$timeout","EditableTextHelper"]}(),function(){"use strict";function a(){var a="",b="";this.setWorkingText=function(b){return a=b,this},this.setWorkingClassName=function(a){return b=a,this},this.$get=function(){return{workingText:a,workingClassName:b}}}angular.module("gg.editableText").provider("EditableTextHelper",a)}();