!function(){"use strict";angular.module("gg.editableText",["puElasticInput"])}(),function(){"use strict";function a(a,b,c,d){function e(d,e,f){function g(){e.addClass("gg-editable-text"),j=e.find("input")[0],d.editingValue=d.editableText,d.$watch("isEditing",i),d.$watch("editableText",function(a){k=a,d.editingValue=a,h()})}function h(){d.isEditing&&f.hasOwnProperty("ggSelectAll")&&j.setSelectionRange(0,d.editingValue.length)}function i(a,c){e[a?"addClass":"removeClass"]("editing"),a?(j.focus(),h()):f.hasOwnProperty("ggOnChange")&&a!==c&&d.editingValue!==k?(d.isWorking=!0,b.when(d.onChange({value:d.editingValue})).then(function(a){"undefined"!=typeof a&&(d.editingText=d.editingValue=a)},function(){d.editingValue=d.editableText})["finally"](function(){d.isWorking=!1,h()})):(d.editableText=d.editingValue,h())}var j,k;g(),d.onInputFocus=function(){d.isEditing=!0,h()},d.onInputBlur=function(){d.isEditing=!1,a.$evalAsync(function(){$(j).width($(e).width())})},d.onKeyPress=function(a){13===a.which?($(j).blur(),f.hasOwnProperty("ggKeepFocus")&&c(d.onInputFocus,20)):27===a.which&&(d.editingValue=d.editableText,$(j).blur())}}return{restrict:"EA",scope:{editableText:"=ggEditableText",isEditing:"=ggIsEditing",placeholder:"@",onChange:"&ggOnChange"},transclude:!0,template:'<span ng-class="{\'is-placeholder\': placeholder && !editingValue}" ng-style="{\'max-width\': \'inherit\'}" ><input ng-focus="onInputFocus()" ng-click="onInputFocus()" ng-blur="onInputBlur()" ng-keydown="onKeyPress($event)" ng-model="editingValue" placeholder="{{placeholder}}" type="text" pu-elastic-input pu-elastic-input-minwidth="auto" pu-elastic-input-maxwidth="inherit" /><span ng-hide="isEditing" ng-transclude></span><span ng-show="isWorking && EditableTextHelper.workingText.length" class="'+d.workingClassName+'">'+d.workingText+"</span></span>",link:e}}angular.module("gg.editableText").directive("ggEditableText",a),a.$inject=["$rootScope","$q","$timeout","EditableTextHelper"]}(),function(){"use strict";function a(){var a="",b="";this.setWorkingText=function(b){return a=b,this},this.setWorkingClassName=function(a){return b=a,this},this.$get=function(){return{workingText:a,workingClassName:b}}}angular.module("gg.editableText").provider("EditableTextHelper",a)}();