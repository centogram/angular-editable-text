!function(){"use strict";angular.module("gg.editableText",["puElasticInput"])}(),function(){"use strict";function a(a,b){function c(b,c,d){function e(a,e){var h,i=g[0];d.hasOwnProperty("ggEditMode")||(b.editMode=a),c[a?"addClass":"removeClass"]("editing"),a?(i.focus(),i.selectionStart=i.selectionEnd=b.editingValue?b.editingValue.length:0,d.hasOwnProperty("ggSelectAll")&&i.select()):d.hasOwnProperty("ggOnChange")&&a!==e&&b.editingValue!=f?(h=b.onChange({value:b.editingValue}),h&&h.then?(b.isWorking=!0,h.then(function(a){b.editingValue=a,b.isWorking=!1},function(){b.onReject&&b.onReject(),b.editingValue=b.editableText,b.isWorking=!1})):b.editingValue=b.editableText):b.editableText=b.editingValue}var f,g=c.find("input");b.$watch("isEditing",e),b.$watch("editMode",function(a){b.isEditing=!!a}),b.$watch("editableText",function(a){f=a,b.editingValue=a}),a.$evalAsync(function(){$(g[0]).width($(c).width())}),b.isEditing=!!b.editMode,b.editingValue=b.editableText,c.addClass("gg-editable-text"),b.onInputClick=function(){b.isEditing=!0},b.onInputBlur=function(){b.isEditing=!1,a.$evalAsync(function(){$(g[0]).width($(c).width())})},b.onKeyPress=function(a){var c=g[0];13===a.which?$(c).blur():27===a.which&&(b.editingValue=b.editableText,$(c).blur())}}return{restrict:"EA",scope:{editableText:"=ggEditableText",editMode:"=ggIsEditing",placeholder:"@",onChange:"&ggOnChange",onReject:"&ggOnReject"},transclude:!0,template:'<span ng-class="{\'is-placeholder\': placeholder && !editingValue}" ng-style="{\'max-width\': \'inherit\'}" ><input ng-blur="onInputBlur()" ng-click="onInputClick()" ng-keydown="onKeyPress($event)" ng-model="editingValue" placeholder="{{placeholder}}" type="text" pu-elastic-input pu-elastic-input-minwidth="auto" pu-elastic-input-maxwidth="inherit" /><span ng-hide="isEditing" ng-transclude></span><span ng-show="isWorking && EditableTextHelper.workingText.length" class="'+b.workingClassName+'">'+b.workingText+"</span></span>",link:c}}angular.module("gg.editableText").directive("ggEditableText",a)}(),function(){"use strict";function a(){var a="",b="";this.setWorkingText=function(b){return a=b,this},this.setWorkingClassName=function(a){return b=a,this},this.$get=function(){return{workingText:a,workingClassName:b}}}angular.module("gg.editableText").provider("EditableTextHelper",a)}();